---
import BaseLayout from "../../components/layout/BaseLayout.astro";
import Header from "../../components/layout/Header.astro";
import Footer from "../../components/layout/Footer.astro";
import HeroCard from "../../components/ui/HeroCard.astro";
import { getCollection, type CollectionEntry } from "astro:content";

const title = "Our Programs";
const programs = await getCollection("programs");
const sortedPrograms = programs.sort(
  (a: CollectionEntry<"programs">, b: CollectionEntry<"programs">) =>
    a.data.order - b.data.order
);
---

<BaseLayout
  title={`${title} | Camrose Neighbor Aid Center`}
  description="Explore the various programs and services offered by Camrose Neighbor Aid Center to support our community."
>
  <Header slot="header" />

    <h1 class="page-title">{title}</h1>

    <div class="programs-grid">
      {sortedPrograms.map((program: CollectionEntry<"programs">) => (
        <HeroCard
          title={program.data.title}
          description={program.data.description}
          image={program.data.image}
          imageAlt={program.data.imageAlt}
          href={`/programs/${program.slug}`}
        />
      ))}
    </div>

  <Footer slot="footer" />
</BaseLayout>

<style>
  .programs-page {
    padding: var(--space-16) 0;
    min-height: 100vh;
  }

  .page-title {
    text-align: center;
    font-size: var(--text-4xl);
    font-weight: 700;
    color: var(--color-text);
    margin-bottom: var(--space-16);
    padding: 0 var(--space-4);
  }

  .programs-grid {
    display: flex;
    flex-direction: column;
    gap: var(--space-12);
    padding-bottom: var(--space-16);
  }

  @media (width <= 768px) {
    .programs-page {
      padding: var(--space-12) 0;
    }

    .page-title {
      font-size: var(--text-3xl);
      margin-bottom: var(--space-12);
    }

    .programs-grid {
      gap: var(--space-12);
      padding-bottom: var(--space-12);
    }
  }
</style>
