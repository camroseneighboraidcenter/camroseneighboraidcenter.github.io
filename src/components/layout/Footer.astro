---
/**
 * Footer Component
 * Site footer with contact info, quick links, social icons, and theme toggle.
 */
import { contactInfo, charityStatus } from "../../data/contact";
import { formatPhoneNumber, formatAddress } from "../../utils/formatters";
import SocialIcons from "../ui/SocialIcons.astro";
import ThemeToggle from "../ui/ThemeToggle.astro";

const currentYear = new Date().getFullYear();
const address = formatAddress(contactInfo.address);
const mailingAddress = formatAddress(contactInfo.mailingAddress);
const charityNumber = charityStatus.charityNumber;
const craLink = charityStatus.craLink;
---

<footer class="site-footer">
  <div class="footer-container">
    <div class="footer-content">
      <!-- Organization Info -->
      <div class="footer-section" id="footer-brand">
        <h2 class="footer-heading">Camrose Neighbor Aid Center</h2>
        {
          contactInfo.email && (
            <p>
              <a href={`mailto:${contactInfo.email}`} class="contact-link">
                {contactInfo.email}
              </a>
            </p>
          )
        }
        {
          contactInfo.phone && (
            <p>
              <a href={`tel:${contactInfo.phone}`} class="contact-link">
                <span set:html={formatPhoneNumber(contactInfo.phone)} />
              </a>
            </p>
          )
        }
        {
          charityNumber && (
            <p>
              <a href={craLink} target="_blank" rel="noopener noreferrer" class="contact-link">
                CRA Number: {charityNumber}
              </a>
            </p>
          )
        }
      </div>

      <div class="footer-section" id="footer-office">
        <h2 class="footer-heading">Office</h2>
        {
          address && (
            <address class="contact-info">
              <p>{address.street}</p>
              <p>{address.cityProvince}</p>
              <p>{address.postalCode}</p>
            </address>
          )
        }
      </div>

      <!-- Quick Links -->
      <div class="footer-section" id="footer-quick-links">
        <h2 class="footer-heading">Quick Links</h2>
        <ul class="footer-links">
          <li><a href="/about">About Us</a></li>
          <li><a href="/programs">Our Programs</a></li>
          <li><a href="/contact">Contact</a></li>
          <li><a href="/donate">Donate</a></li>
        </ul>
      </div>

      <!-- Social and Contact -->
      <div class="footer-section" id="footer-social">
        <h2 class="footer-heading">Connect With Us</h2>
        <SocialIcons />
      </div>

      <div class="footer-section" id="footer-mailing">
        <h2 class="footer-heading">Mailing</h2>
        {
          mailingAddress && (
            <address class="contact-info">
              <p>{mailingAddress.street}</p>
              <p>{mailingAddress.cityProvince}</p>
              <p>{mailingAddress.postalCode}</p>
            </address>
          )
        }
      </div>

      <div class="footer-section" id="footer-theme">
        <h2 class="footer-heading">Light/Dark Mode</h2>
        <ThemeToggle />
      </div>
    </div>

    <div class="footer-bottom">
      <div class="footer-bottom-content">
        <p>
          Our work takes place on historical and contemporary Indigenous lands, including the territories of Treaty 6, Treaty 7 & Treaty 8 and the homeland of the MÃ©tis Nation of Alberta and 8 Metis Settlements. We also acknowledge the many Indigenous communities that have been forged in urban centers across Alberta.
        </p>
        <p class="footer-copyright">
          &copy; {currentYear} Camrose Neighbor Aid Center. All rights reserved.
        </p>
      </div>
    </div>
  </div>
</footer>

<style>
  .site-footer {
    background-color: var(--color-surface);
    padding: var(--space-8) 0 var(--space-6);
    border-top: 1px solid var(--color-border);
  }

  .footer-container {
    max-width: var(--container-max-width);
    margin: 0 auto;
    padding: 0 var(--container-padding);
  }

  .footer-content {
    display: grid;
    grid-template-columns: repeat(3, minmax(220px, 1fr));
    gap: var(--space-8);
    margin-bottom: var(--space-8);
    place-items: normal stretch;
  }

  .footer-section {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    text-align: left;
  }

  #footer-quick-links,
  #footer-theme {
    align-items: flex-end;
    text-align: right;
  }

  #footer-mailing,
  #footer-office {
    align-items: center;
    text-align: center;
  }

  #footer-quick-links .footer-links {
    align-items: flex-end;
  }

  .footer-heading {
    font-size: var(--text-lg);
    font-weight: 600;
    margin-bottom: var(--space-4);
    color: var(--color-text);
  }

  .contact-info {
    font-style: normal;
    line-height: 1.6;
    margin-bottom: var(--space-4);
  }

  .contact-info p {
    margin: 0;
    color: var(--color-text-light);
  }

  .contact-link {
    display: block;
    color: var(--color-text-light);
    text-decoration: none;
    margin-top: var(--space-2);
    transition: color var(--transition-fast);
  }

  .contact-link:hover {
    color: var(--color-primary);
  }

  .footer-links {
    list-style: none;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    align-items: flex-start;
  }

  .footer-links a {
    color: var(--color-text-light);
    text-decoration: none;
    transition: color var(--transition-fast);
  }

  .footer-links a:hover {
    color: var(--color-primary);
  }

  .footer-bottom {
    padding-top: var(--space-6);
    border-top: 1px solid var(--color-border);
    text-align: center;
    color: var(--color-text-light);
    font-size: var(--text-sm);
  }

  .footer-copyright {
    margin-top: var(--space-4);
  }

  @media (width <= 1024px) {
    .footer-content {
      grid-template-columns: repeat(2, minmax(240px, 1fr));
      gap: var(--space-8);
      max-width: var(--max-width-4xl);
      margin: 0 auto;
      justify-items: center;
    }

    .footer-section {
      width: 100%;
      max-width: var(--max-width-sm);
      align-items: center;
      text-align: center;
    }

    .footer-heading {
      text-align: center;
    }

    #footer-quick-links,
    #footer-theme {
      align-items: center;
      text-align: center;
    }

    #footer-quick-links .footer-links {
      align-items: center;
    }

    .footer-links {
      align-items: center;
      text-align: center;
    }

    .contact-info,
    .contact-link {
      text-align: center;
    }

    #footer-brand {
      order: 1;
    }

    #footer-social {
      order: 2;
    }

    #footer-office {
      order: 3;
    }

    #footer-mailing {
      order: 4;
    }

    #footer-quick-links {
      order: 5;
    }

    #footer-theme {
      order: 6;
    }
  }

  @media (width <= 768px) {
    .footer-content {
      grid-template-columns: 1fr;
      justify-items: center;
      text-align: center;
      margin-bottom: var(--space-8);
    }

    .footer-section {
      align-items: center;
      text-align: center;
      max-width: var(--max-width-sm);
    }

    .footer-links {
      align-items: center;
      text-align: center;
    }
  }
</style>
